# Enhancements and Fixes

Date: 10-4-25

The following requests and fixes are proposed to improve the user experience and functionality of the application. Each item needs to be evaluated and designed thoroughly for implementation into the app. The implementation of each should then be planned.

## Notes

- Review @architecture.md for current architecture overview.

## Requests

### Listings

- Managed fields should be editable, as we've already requested multiple times in past request docs.

### Tables

- Every field in a table should have a tooltip icon next to its column name. Hovering over this icon should show the field's description, if one exists. If no description exists, the icon should not be shown.
- Dropdowns should have a consistent style across the app. They should be easy to read and use, with clear options and a user-friendly interface. Currently, some dropdowns are small and the options can't be read without scrolling horizontally or vertically. Width seems to currently be set by the size of the column, but instead should be determined by the size of the longest option in the dropdown, plus some constant padding.

### Global Fields

### Valuations

- There should be a Basic valuation view and Advanced view. The current view should be the Advanced view. Normally, users should see the Basic view, which has fewer options and is simpler to use. An "Advanced" button should be available to switch to the Advanced view.
- Basic View:
  - Should include only the most commonly used options.
  - Should have a simplified interface with fewer fields and options.
  - Should provide clear explanations for each option to help users understand their choices.
  - Should allow users to simply assign a dollar value to each component. It should use the existing dropdown from the Conditions builder, but with a simplified view with basic x field with y value equals $z.
- Should support either quantity-based valuation or manual valuation. IE for RAM, the user could say every 8GB=$25, or they could say 16GB=$50, 32GB=$100, 64GB=$200, etc. Every field should have those 2 similar options.

## Bugs

- When editing Valuation Rules, the following errors when trying to Update:

    ```log
    app-index.js:35 Warning: Each child in a list should have a unique "key" prop.

Check the render method of `ConditionGroup`. See https://reactjs.org/link/warning-keys for more information.
    at SortableCondition (webpack-internal:///(app-pages-browser)/./components/valuation/condition-group.tsx:29:11)
    at ConditionGroup (webpack-internal:///(app-pages-browser)/./components/valuation/condition-group.tsx:143:11)
    at div
    at form
    at div
    at div
    ```

    ```log
    app-index.js:35 Warning: Each child in a list should have a unique "key" prop.

Check the render method of `ActionBuilder`. See https://reactjs.org/link/warning-keys for more information.
    at div
    at ActionBuilder (webpack-internal:///(app-pages-browser)/./components/valuation/action-builder.tsx:43:11)
    at div
    at form
    at div
    at div
    ```

    ```log
    ERROR:    Exception in ASGI application

Traceback (most recent call last):

  File "/usr/local/lib/python3.11/site-packages/dealbrain_api/api/rules.py", line 533, in update_rule

    updates["conditions"] = [c.dict() for c in updates["conditions"]]

  File "/usr/local/lib/python3.11/site-packages/dealbrain_api/api/rules.py", line 533, in <listcomp>

    updates["conditions"] = [c.dict() for c in updates["conditions"]]

AttributeError: 'dict' object has no attribute 'dict'
    ```
