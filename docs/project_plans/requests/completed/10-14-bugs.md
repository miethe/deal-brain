# Enhancements and Fixes

Date: 10-14-25

The following requests and fixes are proposed to improve the user experience and functionality of the application. Each item needs to be evaluated and designed thoroughly for implementation into the app. The implementation of each should then be planned.

## Notes

- Review @architecture.md for current architecture overview.

## Requests

## Bugs

### Valuation Calculations

- Something is significantly wrong with the valuation calculations from the Baseline Valuation rules recently added per the `basic-valuation-prd.md`. Currently, every Listing has a +300% adjustment from the Baseline rules, which is clearly incorrect. This needs to be investigated and fixed. The adjustments were coming from the Baseline rules: DDR Generation, Condition, and Release Year. I disabled the latter two, but interestingly the DDR Generation rule updated to apply the full 300% adjustment. Additionally, when trying to update the Rules more, it seems that the adjustment continued to grow unpexectedly. This needs to be fixed so that the Baseline rules provide reasonable adjustments to the Listings as expected.

### Adjusted per x-thread CPU Mark duplicate $$

- In the Listing "card" for each Listing, the 4 fields for base and adjusted $/single-thread CPU Mark and $/multi-thread CPU Mark are showing duplicate dollar signs ($$). This is a minor UI bug that should be fixed to show only a single $.

### Base to Advanced Rules

- When switching from Basic to Advanced rules in the Valuation Rules page, the "Baseline" rules are not populated correctly. All fields have 0 conditions and 1 action with a blank value and default weights. The priority is correctly set for each Rule, as are the RuleGroups and existence of each Rule. However, I would expect the actual conditions and actions to be populated with the same values as in the Basic mode. This needs to be fixed so that the Advanced mode correctly reflects the current state of the Baseline rules. Otherwise, the Baseline rules cannot be edited beyond the simple Overrides in Basic mode.
    - For example, within the RamSpec RuleGroup, the DDR Generation rule should have a condition for the DDR generation (e.g., "DDR3") and an action with a multiplier value (e.g., 0.7) for each generation. This would need to either be a separate rule for every generation value, or a single rule with a method for tying conditions to specific actions. This must be designed and implemented. This multiplier would then be applied to Total Capacity (GB) Rule, which would only have an action with a formula for the base price per GB. The final adjustment would be the product of the two rules.
    - Additionally, the foreign key rules will need to be mapped appropriately, ue RAM Spec and GPU, mapping Rules to the RuleGroups for those entities. Could these potentially be hidden from the UI in Advanced mode, since they cannot be edited there and have no direct function?
