# Enhancements and Fixes

Date: 9-1-25

The following requests and fixes are proposed to improve the user experience and functionality of the application. Each item needs to be evaluated and designed thoroughly for implementation into the app. The implementation of each should then be planned.

## Notes

- Review @architecture.md for current architecture overview.
- Remember that the goal of this site is to provide accurate and explainable valuations for computer hardware listings, based on a set of adjustable rules and market data. For example, a user should be able to add a listing of a computer from Amazon with the relevant details - ie CPU, RAM, Storage, GPU, etc - and have the system provide a valuation based on current market data and the user's valuation rules. 
    - The goal is to normalize the valuation by assigning prices to each component, allowing the user to determine the "value" of the listing as a whole, as well as for the components included. For example, take a listing for a used computer with a valuable GPU, moderate CPU and RAM, and worthless chassis. The valuation engine would allow the user to calculate the total value of all the components, determining if altogether the listing is worth purchasing, or if it would be better to purchase the components separately. Another example is cross-shopping new SFF PCs, where a user is comparing different models with the same CPU but different RAM, storage, etc. The valuation engine would allow the user to determine which model provides the best price/performance ratio based on their own valuation rules.

## Requests

### Valuation Page

- The /valuation-rules page should include a list of all existing valuation rules, with options to edit or delete each rule.
- There should be a button to create a new valuation rule, which opens a modal with all relevant fields.
- The modal should support validation rules and allow for custom fields to be added, using the same structure as other pages with global fields.
- Users should be able to preview the impact of a valuation rule before saving it, showing how it would affect a sample selection of existing listings, similar to the mappings preview during import.
- When creating a valuation rule, users should be able to specify conditions based on any field, including custom fields. The conditions should support various operators (e.g., equals, contains, greater than, less than). The field selection should support searching and selecting from a list of currently available fields. The fields should be specific to the category selected for the valuation rule, ie "listings". For example, the default fields for listings are cpu, ram, storage, gpu, etc.
- Valuation rules should be grouped by field, ie CPU, RAM, Storage, etc. Then there can be individual rules per entry for that field, or a universal rule for the field based on some metric.
    - You may have a rule for CPUs with a value assigned per CPU, or based on the passmark score.
    - You may have a rule for RAM with a value assigned per GB, or based on the speed of the RAM, or both. The generation of RAM may also apply a certain modifier, with DDR5 being worth more than DDR4, etc.
    - You may have a rule for Storage with a value assigned per GB, but with a modifier for Storage Type, ie NVMe > SATA > HDD.
    - You may have a rule for the computer chassis altogether, ie a base value for the chassis, with modifiers for condition, brand, etc. Then with additional modifiers for ports, expandability, etc, with each port type having a specific value.
- Valuation rules should support more complex conditions, such as ranges (e.g., "if RAM is between 16GB and 32GB") and combinations of conditions (e.g., "if CPU is Intel and RAM is at least 16GB").
- Valuation rules should support weighting, allowing users to specify how much each rule contributes to the overall valuation score.
- The app must support importing valuation rules via the Import page or import button on the valuation-rules page, working similar to the other import flows. The import should support mapping fields from the import file to the relevant fields in the valuation rule model, including custom fields, as with other import flows.
- The app should support adding/editing/deleting valuation rules via the CLI or API, similar to other commands. This should include support for importing valuation rules via the CLI as well.
- Valuation Rules should be able to be saved as a packaged Ruleset, allowing users to export and import sets of rules between different instances of the app. This would allow users to share their valuation strategies with others, or to maintain different sets of rules for different use cases (e.g., one for gaming PCs, another for workstations, etc). Users should also be able to apply different rulesets to different categories of listings, allowing for more tailored valuations based on the type of hardware being evaluated.
